<app-map-list class="map-list" [showActions]="false" [onlyVisible]="true" (divClicked)="openPopup()"></app-map-list>
<!-- Popup -->
<div class="popup" *ngIf="isPopupVisible">
  <div class="popup-content">
    <!-- Portrait Navigation -->

    <div class="portrait-container">
      <button class="arrow-button" (click)="navigatePortrait('prev')">←</button>
      <div class="portrait-display">
        <img [src]="getCurrentPortraitImage()" alt="Portrait" class="portrait-image" />
      </div>
      <button class="arrow-button" (click)="navigatePortrait('next')">→</button>
    </div>

    <!-- Name Input -->
    <div class="name-container">
      <label for="player-name">Who are you ?</label>
      <input type="text" id="player-name" [(ngModel)]="playerName" placeholder="Enter your name" class="name-input" />
    </div>

    <!-- Stat Selection -->
    <div class="stat-container">
      <button class="stat-button" [class.selected]="lifeSelected" (click)="selectLife()" [disabled]="rapiditySelected">
        Vie: {{ stats.life }}
      </button>
      <button class="stat-button" [class.selected]="rapiditySelected" (click)="selectRapidity()"
        [disabled]="lifeSelected">
        Rapidité: {{ stats.rapidity }}
      </button>
      <button class="stat-button" [class.selected]="attackSelected" (click)="selectAttack()"
        [disabled]="defenseSelected">
        Attaque: {{ stats.attack }}
      </button>
      <button class="stat-button" [class.selected]="defenseSelected" (click)="selectDefense()"
        [disabled]="attackSelected">
        Défense: {{ stats.defense }}
      </button>
    </div>

    <!-- Close Popup -->
    <button class="close-popup-button" (click)="closePopup()">Close</button>
  </div>
</div>